# üìÑ Deeplink - Banking App - Alcantara

## üìò Document Info

* **Product Owner:**
* **Customer Owner:**
* **Solution Owner:**
* **Contributors:**
* **Created On:**
* **Version:**
* **Status:**

---

## üìö Contents

1. Introduction
2. Universal Deeplink Configuration
3. Deeplink Supported Screens
4. Environments
5. Fallback Scenarios
6. Salesforce Push Notification Deeplink Handling

---

## üì• Introduction

This document outlines the **technical solution for Deeplink features** designed for a **Banking mobile application**.

### Deeplink Sharing Channels

1. E-Transfer confirmation email with embedded deep link
2. Web app link shared on 3rd party platforms
3. Push Notifications
4. In-App Notifications

> If native app is installed ‚Üí Opens in app
> Else ‚Üí Opens in web browser

**Domain Setup:** Deep linking is configured under the banking web app domain.

---

## üåê Universal Deeplink Configuration

To support seamless navigation between external sources (e.g., email links, push notifications) and the banking mobile application, universal deeplinks must be configured properly.

### Android

1. **Intent Filters in AndroidManifest.xml**

```xml
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data
        android:host="<your-domain>"
        android:scheme="https" />
</intent-filter>
```

2. **App Links Validation**

   * Add your domain and URL patterns to the Digital Asset Links file (`assetlinks.json`) hosted at:
     `https://<your-domain>/.well-known/assetlinks.json`
   * Configure Play Console with the same domain and SHA256 certificate fingerprint.

### iOS

1. **Associated Domains in Xcode**

   * Enable Associated Domains capability.
   * Add the domain in the format:
     `applinks:<your-domain>`

2. **Apple App Site Association File (AASA)**

   * Host AASA at:
     `https://<your-domain>/.well-known/apple-app-site-association`
   * Ensure the file is JSON-formatted and accessible via HTTPS with no redirects.

> Ensure the paths in AASA and assetlinks.json cover all expected deep link structures (e.g., `/etransfer`, `/dashboard`).

---

## üîó Deeplink Supported Screens

* **E-Transfer**

### E-Transfer

```text
Deep Link URL: <DomainUrl>/etransfer
Screen Name: etransfer
```

> This link is generated by the web application **after an E-Transfer is completed**. It is sent to the user via email. When the user clicks the link, it redirects to the mobile app and navigates the user to the **E-Transfer screen**.

---

## üåê Environments

| Environment | URL                                        |
| ----------- | ------------------------------------------ |
| Dev         | `https://web.videoready.dev.xp.irdeto.com` |
| Pre-Prod    | `https://web.int.alcant.net`               |
| Prod        | `https://sooka.my`                         |

---

## ‚ö†Ô∏è Fallback Scenarios

### Invalid or Broken Deeplink (e.g., malformed, expired, or incorrect transaction ID)

| Source                              | Fallback Behavior                  |
| ----------------------------------- | ---------------------------------- |
| Email Link with Invalid Deep Link   | Opens browser ‚Üí 404 page           |
| Salesforce Push Notification (URL)  | Opens browser ‚Üí 404 page           |
| Salesforce Custom Payload (key=url) | Opens app ‚Üí navigates to Dashboard |
| In-App Notification (Web URL)       | Opens browser ‚Üí 404 page           |

### Incorrect Path Parameter or Screen Name

\| Scenario                                | Fallback Behavior     |
\|----------------------------------------|
