# üìÑ Deeplink - Mobile App


## üìö Contents

1. Introduction
2. Deeplink Supported Screens
3. Environments
4. Fallback Scenarios
5. Salesforce Push Notification Deeplink Handling

---

## üì• Introduction

This document outlines the **technical solution for Deeplink features** designed for a **Banking mobile application**.

### Deeplink Sharing Channels

1. E-Transfer confirmation email with embedded deep link
2. Web app link shared on 3rd party platforms
3. Push Notifications
4. In-App Notifications

> If native app is installed ‚Üí Opens in app
> Else ‚Üí Opens in web browser

**Domain Setup:** Deep linking is configured under the banking web app domain.

---

## üîó Deeplink Supported Screens

* **E-Transfer**

### E-Transfer

```
Deep Link URL: <DomainUrl>/etransfer
Screen Name: etransfer
```

> This link is generated by the web application **after an E-Transfer is completed**. It is sent to the user via email. When the user clicks the link, it redirects to the mobile app and navigates the user to the **E-Transfer screen**.

---

## üåê Environments

| Environment | URL                                        |
| ----------- | ------------------------------------------ |
| Dev         | `https://web.videoready.dev.xp.irdeto.com` |
| Pre-Prod    | `https://web.int.alcant.net`               |
| Prod        | `https://sooka.my`                         |

---

## ‚ö†Ô∏è Fallback Scenarios

### Invalid or Broken Deeplink (e.g., malformed, expired, or incorrect transaction ID)

| Source                              | Fallback Behavior                  |
| ----------------------------------- | ---------------------------------- |
| Email Link with Invalid Deep Link   | Opens browser ‚Üí 404 page           |
| Push Notification (URL)             | Opens browser ‚Üí 404 page           |
| Custom Payload (key=url)            | Opens app ‚Üí navigates to Dashboard |
| In-App Notification (Web URL)       | Opens browser ‚Üí 404 page           |

### Incorrect Path Parameter or Screen Name

| Scenario                                | Fallback Behavior     |
| --------------------------------------- | --------------------- |
| Invalid path, screen, or transaction ID | Navigate to Dashboard |

---

## üì© Salesforce Push Notification Deeplink Handling

1. **Push Notification with Deep Link URL:**

   * **Android:** Clicking the deep link in the notification opens the banking app directly to the target screen.
   * **iOS:** Opens Safari with the link; the user must tap the "Open App" banner to continue into the app.

2. **Push Notification with Custom Key/Value:**

   * **Key:** `url` (should be handled in app logic)
   * **Value:** Deep link such as `https://<DomainUrl>/etransfer`
   * Opens the correct screen in the banking app (Android and iOS) if handled properly in the routing logic.

3. **In-App Notification with Web URL:**

   * **Android:** Directly opens the screen in the app.
   * **iOS:** Loads the URL in Safari first; "Open App" CTA prompts user to continue to app.

4. **In-App Notification with Custom Payload:**

   * The `url` key must contain a valid deep link
   * App should be configured to recognize and route based on the payload URL

> ‚ö†Ô∏è If both a Deep Link URL and Custom Payload are present, the Deep Link URL takes priority. It is advised to use only one approach per notification for consistency.
